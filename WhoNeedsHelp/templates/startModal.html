<div class="modal-header">
    <h4 class="modal-title">Velkommen</h4>
</div>
<div class="modal-body">
    <!-- Normal login -->
    <div ng-show="pwReset.step == 0">
        <h2>Brug uden login</h2>
        <form onsubmit=" return false; " id="usernameModalForm" ng-submit="Start()">
            <div class="form-group" id="usernameGroup">
                <label for="usernameModalInput">Navn</label>
                <input type="text" class="form-control" id="usernameModalInput" ng-model="StartingModal.Name" required="required"/>
            </div>
            <input type="submit" class="btn btn-primary" id="selectUsernameButton" value="Start"/>
        </form>
        <hr/>
        <h2>Login</h2>
        <form onsubmit="return false;" id="loginUserFormModal" ng-submit="login()">
            <div class="form-group">
                <label for="LoginUserEmailModal">Email</label>
                <input type="email" class="form-control" id="LoginUserEmailModal" ng-model="StartingModal.Email"/>
            </div>
            <div class="form-group">
                <label for="LoginUserPasswordModal">Kodeord</label>
                <input type="password" class="form-control" id="LoginUserPasswordModal" ng-model="StartingModal.Password"/>
            </div>
            <div class="checkbox">
                <label ng-init="StartingModal.StayLoggedIn = false">
                    <input type="checkbox" ng-model="StartingModal.StayLoggedIn"> Forbliv logget ind
                </label>
            </div>
            <input class="btn btn-primary" type="submit" value="Login"/>
        </form>
        <button class="btn btn-default" ng-click="startPasswordReset()">Jeg har glemt mit kodeord</button>
    </div>
    <!-- Part 1 of the password reset process Enter email-->
    <div ng-show="pwReset.step == 1">
        <form onsubmit=" return false; " ng-submit="RequestPasswordReset()">
            <div class="form-group">
                <label for="pwResetEmailInput">Email</label>
                <input type="text" class="form-control" id="pwResetEmailInput" ng-model="pwReset.email" required="required"/>
            </div>
            <input type="submit" class="btn btn-primary" value="Bestil Nulstilling"/>
        </form>
        <alert type="danger" ng-show="pwReset.invalidEmail" close="pwReset.invalidEmail = false">Der findes ingen bruger med denne emailaddresse.</alert>
        <alert type="info" ng-show="pwReset.missingEmail" close="pwReset.missingEmail = false">Af sikkerhedsårsager skal du indtaste din email igen. Efterfølgende kan du bare klikke "Nulstil".</alert>
        <!-- Part 2 of the password reset process Enter key from email and new password -->
        <alert type="success" ng-if="pwReset.mailSent" close="pwReset.mailSent = false">Der er blevet sendt en email til {{::pwReset.email}} med en nøgle til nulstilling.<br/>Du har 2 timer til at nulstille kodeordet.</alert>
        <form onsubmit=" return false; " ng-submit="ResetPassword()">
            <div class="form-group" ng-class="{'has-success': pwReset.key && pwReset.key.trim()}">
                <label for="pwResetKeyInput">Nøgle</label>
                <input type="text" class="form-control" id="pwResetKeyInput" ng-model="pwReset.key" required="required"/>
            </div>
            <div class="form-group" ng-class="{'has-error': pwReset.pass1 != pwReset.pass2, 'has-success': pwReset.pass1 == pwReset.pass2 && pwReset.pass1 && pwReset.pass1.trim()}">
                <label for="pwResetPass1">Nyt kodeord</label>
                <input type="password" class="form-control" id="pwResetPass1" ng-model="pwReset.pass1" required="required"/>
            </div>
            <div class="form-group" ng-class="{'has-error': pwReset.pass1 != pwReset.pass2, 'has-success': pwReset.pass1 == pwReset.pass2 && pwReset.pass1 && pwReset.pass1.trim()}">
                <label for="pwResetPass2">Gentag kodeord</label>
                <input type="password" class="form-control" id="pwResetPass2" ng-model="pwReset.pass2" required="required"/>
            </div>
            <input type="submit" class="btn btn-primary" value="Nulstil"/>
        </form>
        <alert type="danger" ng-show="pwReset.key && !pwReset.key.trim()">Du skal indtaste en nøgle</alert>
        <alert type="danger" ng-show="pwReset.pass1 !== pwReset.pass2">Kodeord stemmer ikke overens</alert>
        <alert type="danger" ng-show="pwReset.resetFailed" close="pwReset.resetFailed = false">Nulstilling mislykkedes</alert>
        <button class="btn btn-default" ng-click="stopPasswordReset()">Annuller</button>
    </div>
</div>